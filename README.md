# rf-keyboard-corpora

**Корпусная база проекта «Клавиатура РФ» — системных раскладок для всех кириллических языков**

---

## 1. Какие данные собираем и зачем

| Компонент                | Файл/папка                             | Назначение                                                                              |
| ------------------------ | -------------------------------------- | --------------------------------------------------------------------------------------- |
| **Монокорпус**           | `raw/lang_mono_<N>.txt`                | Основной источник статистики **по символам** (один токен = один Unicode‑символ)         |
| **Частотности**          | `frequencies/lang_monocorpus_freq.csv` | Таблица «символ → вхождений» — упорядочиваем варианты long‑press                        |
| **Раскладки**            | `keyboard/lang_key_*.json`             | Базовая, 4‑рядная и т. д. — готовые файлы iOS/macOS                                     |
| **Long‑press‑маппинг**   | `mapping/lang_key_mapping.json`        | Указывает, под какой **базовой** русской буквой показывать дополнительные символы языка |
| **Статистика носителей** | `stats/lang_population.csv`            | Взвешиваем «частота × охват» и аргументируем приоритеты перед Apple                     |
| **Манифест**             | `metadata.json`                        | Машинно‑читаемые метаданные (версия, лицензия, контакты)                                |
| **README**               | `README.md`                            | Человеческое описание: источники корпуса, очистка, особенности                          |

> `lang` — код ISO 639‑3 (пример: `tyv`, `kbd`).
> Хеш‑суммы не обязательны; при желании добавляйте их в `metadata.json`.

---

## 2. Формат `lang_key_mapping.json`

```jsonc
{
  "О": ["Ӧ", "Ө", "О̄"],
  "У": ["Ӱ", "Ү"],
  "Н": ["Ң"],
  "Е": ["Ё", "Ё"]
}
```

*Ключ — базовая русская клавиша; значения — варианты в порядке убывания частоты.*

---

## 3. Мини‑пайплайн вендора

1. **Соберите корпус** → `raw/`, один символ = один токен.

2. **Вычислите частоты**
   – локально:

   ```bash
   python tools/freq/char_freq.py raw/tyv_mono_5M.txt \
        > frequencies/tyv_monocorpus_freq.csv
   ```

   – или через [Google Colab‑ноутбук](tools/freq/char_freq_colab.ipynb).

3. **Создайте `lang_key_mapping.json`** вручную в удобном редакторе.

4. **Подготовьте раскладки** (`keyboard/lang_key_default.json` и, при необходимости, дополнительные).

5. **Добавьте статистику носителей**, заполните `metadata.json` и `README.md`.

6. **Откройте pull‑request**.

---

## 4. FAQ

| Вопрос                                            | Ответ                                                                             |
| ------------------------------------------------- | --------------------------------------------------------------------------------- |
| **Можно ли несколько вендоров для одного языка?** | Да. Используйте разные папки `<vendor>`; скрипты автоматически объединят частоты. |

---

**Корпус → Частоты → Эргономика** — точные данные дают объективное основание для расположения букв и усиливают аргументацию «Клавиатуры РФ» перед Apple.
